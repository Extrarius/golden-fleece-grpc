version: v1

deps:
  - github.com/bufbuild/protovalidate@v0.3.1
  # Примечание: protobuf (google/protobuf/*) доступен через protovalidate, 
  # поэтому не требуется явно добавлять github.com/protocolbuffers/protobuf

generate:
  inputs:
    - directory: "proto"
  plugins:
    - path: bin/protoc-gen-go
      out: pkg/proto
      opt:
        - paths=source_relative
    - path: bin/protoc-gen-go-grpc
      out: pkg/proto
      opt:
        - paths=source_relative
        - require_unimplemented_servers=false
    # Примечание: protovalidate использует runtime валидацию через библиотеку buf.build/go/protovalidate
    # Отдельный плагин protoc-gen-validate может не понадобиться, так как валидация выполняется в runtime

lint:
  use:
    - DEFAULT
